\documentclass{book}
\usepackage[letterpaper,top=2.5cm,bottom=2.5cm,left=2.8cm,right=2cm]{geometry}
\usepackage[toc,page]{appendix}
%\usepackage[letterpaper]{geometry}
\usepackage[table]{xcolor}
%\usepackage[draft,allpages,fontfamily=phv,color=gray!20,mark={HSA Foundation Confidential and Proprietary},fontsize=32pt,angle=45,scale=0.8,xcoord=0,ycoord=0]{draftmark}
\usepackage[fontsize=11]{scrextend}
\usepackage{makeidx}
\usepackage{natbib}
\usepackage{graphicx}
\usepackage{sidecap}
\usepackage{multicol}
\usepackage{float}
\usepackage{listings}
\usepackage{color}
\usepackage{ifthen}
\usepackage{textcomp}
\usepackage{alltt}
\usepackage{ifpdf}
\usepackage{paralist}
\ifpdf
\usepackage[pdftex,
            pagebackref=true,
            colorlinks=true,
            linkcolor=blue,
            unicode
           ]{hyperref}
\else
\usepackage[ps2pdf,
            pagebackref=true,
            colorlinks=true,
            linkcolor=blue,
            unicode
           ]{hyperref}
\usepackage{pspicture}
\fi
%\usepackage[utf8]{inputenc}
%\usepackage{mathptmx}
%\usepackage[scaled=.90]{helvet}
\usepackage{times}
\usepackage{sectsty}
\usepackage{amssymb}
\usepackage[titles]{tocloft}
\lstset{language=C++,inputencoding=utf8,breaklines=true,breakatwhitespace=true,tabsize=4,
                basicstyle=\ttfamily,
                xleftmargin=\parindent,
                keywordstyle=,
                identifierstyle=\itshape,
                emph={hsa_status_query_description, hsa_notification_callback_register, hsa_error_callback_register, hsa_open, hsa_close, hsa_context_acquire, hsa_context_release, hsa_topology_table_create, hsa_topology_table_destroy, hsa_clock_convert_time_component_to_host, hsa_clock_convert_convert_time_host_to_component, hsa_signal_create, hsa_signal_bind, hsa_signal_unbind, hsa_signal_destroy, hsa_signal_get_timeout, hsa_signal_send_relaxed, hsa_signal_add_release, hsa_signal_add_relaxed, hsa_signal_and_release, hsa_signal_and_relaxed, hsa_signal_or_release, hsa_signal_or_relaxed, hsa_signal_xor_release, hsa_signal_xor_relaxed, hsa_signal_exchange_release, hsa_signal_exchange_relaxed, hsa_signal_decrement_release, hsa_signal_decrement_relaxed, hsa_signal_cas_release, hsa_signal_max, hsa_signal_min, hsa_signal_send_release, hsa_signal_subtract_release, hsa_signal_subtract_relaxed, hsa_signal_increment_release, hsa_signal_increment_relaxed, hsa_signal_query_acquire, hsa_signal_wait_acquire, hsa_signal_wait_acquire_release, hsa_queue_create, hsa_queue_inactivate, hsa_queue_destroy, hsa_queue_get_read_index_relaxed, hsa_queue_get_read_index_acquire, hsa_queue_get_write_index_relaxed, hsa_queue_get_write_index_acquire, hsa_queue_set_write_index_relaxed, hsa_queue_set_write_index_release, hsa_queue_cas_write_index, hsa_queue_cas_write_index_release, hsa_queue_cas_write_index_acquire, hsa_queue_cas_write_index_relaxed, hsa_queue_cas_write_index_acquire_release, hsa_queue_add_write_index_relaxed, hsa_queue_add_write_index_acquire, hsa_queue_add_write_index_release, hsa_queue_add_write_index_acquire_release, hsa_queue_error_string_from_code, hsa_aql_dispatch_packet_validate, hsa_finalize_brig, hsa_compilationunit_code_destroy, hsa_compilationunit_debug_destroy, hsa_compilationunit_serialize, hsa_compilationunit_deserialize, hsa_symbol_bind_code_object, hsa_symbol_map_query_by_name, hsa_symbol_map_query_by_offset, hsa_symbol_destroy, hsa_memory_register, hsa_memory_deregister, hsa_memory_allocate, hsa_memory_allocate_component_local, hsa_memory_free_component_local, hsa_memory_copy_component_local_to_system, hsa_memory_copy_kernarg_to_system, hsa_memory_copy_system_to_kernarg, hsa_register_agent_dispatch_callback, hsa_extension_query, hsa_vendor_extension_query},emphstyle={\textbf},
                morekeywords={uint64_t, uint32_t, uint8_t, hsa_status_t,hsa_notification_info_t, hsa_async_error_info_t, hsa_segment_t, hsa_memory_descriptor_t, hsa_cache_descriptor_t, hsa_tlb_descriptor_t, hsa_property_t,hsa_agent_type_t,hsa_agent_t, hsa_platform_t, hsa_topology_header_t, signal_value_t, hsa_signal_condition_t,hsa_interrupt_condition_t,hsa_group_execution_info_t, hsa_queue_mailbox_t, hsa_queue_t, hsa_aql_packet_header_t, hsa_aql_dispatch_packet_t, hsa_aql_barrier_packet_t, hsa_aql_agent_dispatch_packet_t, hsa_service_queue_type_t,hsa_symbol_t, hsa_symbol_map_t, hsa_profile_t,hsa_exception_kind_mask_t,hsa_control_directive_present_mask_t,hsa_control_directives_t, hsa_code_version_t,hsa_code_t, hsa_kernel_code_t, hsa_brig_t, hsa_code_entry_t, hsa_code_kind_t,hsa_code_properties_mask_t,hsa_compilationunit_code_t, hsa_compilationunit_debug_t, hsa_extension_t,hsa_vendor_extension_},
                stringstyle=\color{red}\ttfamily,
                commentstyle=\color{brown}\ttfamily,
                morecomment=[l][\color{magenta}]{\#}
}
\usepackage{fancyhdr}
\usepackage{quotchap}
\usepackage{titlesec}
\usepackage{trackchanges}
\usepackage{enumitem}
\usepackage{framed}
\usepackage[ampersand]{easylist}
\ListProperties(Hide=100, Hang=true, Progressive=3ex, 
Style2*=$\bullet$ ,Style1*=$\triangleright$ )


\setlength{\parskip}{4mm plus2mm minus2mm}

\newcommand{\diffblock}[1]{#1}

%\DeclareFontShape{OT1}{cmtt}{bx}{n}
%     {
%      <5><6><7><8><9><10><10.95><12><14.4><17.28><20.74><24.88>cmttb10
%      }{}

\newcommand{\ttbf}[1]{\diffblock{\texttt{\textbf{#1}}}}
\newcommand{\emphld}[1]{\begin{DIFnomarkup} \emph{#1}
\end{DIFnomarkup}}
\newcommand{\dbtt}[1]{\diffblock{\texttt{#1}}}

\addeditor{AMD}
\makeindex
\setcounter{tocdepth}{3}
\renewcommand{\footrulewidth}{0.4pt}
\renewcommand{\familydefault}{\sfdefault}

\RequirePackage[normalem]{ulem} %DIF PREAMBLE
\RequirePackage{color}\definecolor{RED}{rgb}{1,0,0}\definecolor{BLUE}{rgb}{0,0,1}
%DIF PREAMBLE
\providecommand{\DIFadd}[1]{{\protect\color{blue}{#1}}} 
%DIF PREAMBLE

\providecommand{\DIFdel}[1]{{\protect\color{red}{\sout{#1}}}}
%\providecommand{\DIFdel}[1]{{\protect\color{red}{#1}}}
%\providecommand{\DIFdel}[1]{{\protect\color{red}\protect\scriptsize{#1}}}  
\newenvironment{DIFnomarkup}{}{}

%DIF PREAMBLE
%DIF SAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddbegin}{} %DIF PREAMBLE
\providecommand{\DIFaddend}{} %DIF PREAMBLE
\providecommand{\DIFdelbegin}{} %DIF PREAMBLE
\providecommand{\DIFdelend}{} %DIF PREAMBLE
%DIF FLOATSAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddFL}[1]{\DIFadd{#1}} %DIF PREAMBLE
\providecommand{\DIFdelFL}[1]{\DIFdel{#1}} %DIF PREAMBLE
\providecommand{\DIFaddbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFaddendFL}{} %DIF PREAMBLE
\providecommand{\DIFdelbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFdelendFL}{} %DIF PREAMBLE

\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{ \markboth{#1}{} }
\renewcommand{\sectionmark}[1]{ \markright{#1}{} }
\renewcommand{\headrulewidth}{0.5pt}

\hfuzz=15pt
\setlength{\emergencystretch}{15pt}

\fancyhead{} % clear all header fields
\fancyhead[RO,LE]{\bfseries  HSA Core API Programmers Reference Manual}
\fancyfoot{} % clear all footer fields
\fancyfoot[LE,RO]{\thepage}
\fancyfoot[CO,RE]{HSA Core API Programmers Reference Manual}
\fancyhead[LE]{\fancyplain{}{\bfseries\thepage}}
\fancyhead[CE]{\fancyplain{}{}}
\fancyhead[RE]{\fancyplain{}{\bfseries\leftmark}}
\fancyhead[LO]{\fancyplain{}{\bfseries\rightmark}}
\fancyhead[CO]{\fancyplain{}{}}
\fancyhead[RO]{\fancyplain{}{\bfseries\thepage}}
\fancyfoot[CE]{\fancyplain{}{}}
\fancyfoot[LO,RE]{HSA Core API Programmers Reference Manual}
\fancyfoot[CO]{\fancyplain{}{}}

\hbadness=750
\tolerance=750
\begin{document}
\raggedright
%\large
\hypersetup{pageanchor=false,citecolor=blue}
\begin{titlepage}
\includegraphics[width=.5\textwidth]{foundation.png}
\vspace*{7cm}
\begin{center}
{\Large H\-S\-A Core API Programmers Reference Manual\\[1ex]\large
\change[AMD]{0.\-173}{0.\-174} }\\
\vspace*{1cm}
\vspace*{0.5cm}
{\small 17 February 2013}\\
\vspace*{0.5cm}
{\small Draft}\\
\end{center}
\end{titlepage}
\thispagestyle{empty}
{\textcopyright 2013 HSA Foundation. All rights reserved.\\}
The contents of this document are provided in connection with the
HSA Foundation specifications. The HSA Foundation makes no
representations or warranties with respect to the accuracy or
completeness of the contents of this publication and reserves the
right to make changes to specifications and product descriptions at
any time without notice. The information contained herein may be of
a preliminary or advance nature and is subject to change without
notice. No license, whether express, implied, arising by estoppel,
or otherwise, to any intellectual property rights are granted by
this publication. The HSA Foundation assumes no liability
whatsoever, and disclaims any express or implied warranty, relating
to its products including, but not limited to, the implied warranty
of merchantability, fitness for a particular purpose, or
infringement of any intellectual property right.
\clearpage
\pagenumbering{roman}
\tableofcontents
\addtocontents{toc}{~\hfill\textbf{Page}\par}
\clearpage

\pagenumbering{arabic}
\setcounter{page}{1}

%\chapter{changes} \label{changes} \hypertarget{changes}{}
%\input{changes}

\hypersetup{pageanchor=true,citecolor=blue}
\chapter{Introduction} \label{index}\hypertarget{index}{}
\input{index}

\chapter{HSA Core A\-P\-I Specification and Description} \label{coreapi}
\hypertarget{coreapi}{}
This chapter describes HSA Core runtime API by their functional
area. Note that except for any setter/getter API, the remainder of
the core runtime API may be considered thread-safe.  Both the signal
update and the queue index update API are setter/getter API and
define scope an synchronization that applies to the updates and
operate on structure elements.

Several operating systems allow functions to be executed when a DLL
or a shared library is loaded (e.g. DLL main in Windows and GCC
\emph{constructor/destructor} attributes that allow functions to be
executed prior to main in several operating systems). 
Whether or not the HSA runtime functions are allowed to be invoked
in such fashion may be implementation specific and are outside the
scope of this specification.

Similarly, any header files distributed by the HSA foundation for
this spec may contain calling convention specific prefixes such as
\_\_cdecl or \_\_stdcall. Such calling conventions are again invocation,
usage and implementation specific. Hence, the calling convention
specific prefix definition is outside the scope of API definition. 

\input{coreapi}

\begin{appendices}
\chapter{Compilation Unit, Finalizer and ISA Linking}
\label{finalizerchapter} \hypertarget{finalizerchapter}{}
\input{finalizer}

\chapter{Images and Samplers}
\label{images} \hypertarget{images}{}
\input{images}

\chapter{Component Initiated Dispatches} \label{architected}
\hypertarget{architectedchptr}{}
\input{architected_dispatch}

\chapter{Error Status Structure and Defined Values}
\label{errstatus} \hypertarget{errstatus}{}
\input{errstatus}

\end{appendices}

\bibliographystyle{plain}
\bibliography{corebase}
\end{document}
